{"ast":null,"code":"import _slicedToArray from\"C:/First/React-Front-to-Back/feedback/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext,useEffect}from'react';import Card from'./shared/Card';import Button from'./shared/Button';import Rating from'./Rating';import ContextFeedback from'../context/ContextFeedback';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FeedbackForm=function FeedbackForm(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),btnDisable=_useState4[0],setBtnDisable=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),message=_useState6[0],setMessage=_useState6[1];var _useState7=useState(4),_useState8=_slicedToArray(_useState7,2),rating=_useState8[0],setRating=_useState8[1];var _useContext=useContext(ContextFeedback),addFeedback=_useContext.addFeedback,feedbackEdit=_useContext.feedbackEdit,updateFeedback=_useContext.updateFeedback;useEffect(function(){if(feedbackEdit.edit===true){setBtnDisable(false);setText(feedbackEdit.item.text);setRating(feedbackEdit.item.rating);}},[feedbackEdit]);var handleTextChange=function handleTextChange(e){if(text===''){setBtnDisable(true);setMessage(null);}else if(text!==''&&text.trim().length<10){setMessage('Text must be at least 10 character ');setBtnDisable(true);}else{setBtnDisable(false);setMessage(null);}setText(e.target.value);};var handleSubmit=function handleSubmit(e){e.preventDefault();if(text.trim().length>10){var newFeedback={text:text,rating:rating};if(feedbackEdit.edit===true){updateFeedback(feedbackEdit.item.id,newFeedback);}else{addFeedback(newFeedback);}setText('');}};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"How would you rate your service with us?\"}),/*#__PURE__*/_jsx(Rating,{select:function select(rating){return setRating(rating);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleTextChange,type:\"text\",placeholder:\"Write a review\",value:text}),/*#__PURE__*/_jsx(Button,{type:\"submit\",isDisabled:btnDisable,children:\"Send\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:message})]})});};export default FeedbackForm;","map":{"version":3,"names":["useState","useContext","useEffect","Card","Button","Rating","ContextFeedback","jsx","_jsx","jsxs","_jsxs","FeedbackForm","_useState","_useState2","_slicedToArray","text","setText","_useState3","_useState4","btnDisable","setBtnDisable","_useState5","_useState6","message","setMessage","_useState7","_useState8","rating","setRating","_useContext","addFeedback","feedbackEdit","updateFeedback","edit","item","handleTextChange","e","trim","length","target","value","handleSubmit","preventDefault","newFeedback","id","children","onSubmit","select","className","onChange","type","placeholder","isDisabled"],"sources":["C:/First/React-Front-to-Back/feedback/src/components/FeedbackForm.jsx"],"sourcesContent":["import { useState, useContext, useEffect } from 'react';\r\nimport Card from './shared/Card';\r\nimport Button from './shared/Button';\r\nimport Rating from './Rating';\r\nimport ContextFeedback from '../context/ContextFeedback';\r\n\r\nconst FeedbackForm = () => {\r\n  const [text, setText] = useState('');\r\n  const [btnDisable, setBtnDisable] = useState(true);\r\n  const [message, setMessage] = useState('');\r\n  const [rating, setRating] = useState(4);\r\n  const { addFeedback, feedbackEdit, updateFeedback } =\r\n    useContext(ContextFeedback);\r\n\r\n  useEffect(() => {\r\n    if (feedbackEdit.edit === true) {\r\n      setBtnDisable(false);\r\n      setText(feedbackEdit.item.text);\r\n      setRating(feedbackEdit.item.rating);\r\n    }\r\n  }, [feedbackEdit]);\r\n  const handleTextChange = (e) => {\r\n    if (text === '') {\r\n      setBtnDisable(true);\r\n      setMessage(null);\r\n    } else if (text !== '' && text.trim().length < 10) {\r\n      setMessage('Text must be at least 10 character ');\r\n      setBtnDisable(true);\r\n    } else {\r\n      setBtnDisable(false);\r\n      setMessage(null);\r\n    }\r\n    setText(e.target.value);\r\n  };\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (text.trim().length > 10) {\r\n      const newFeedback = { text, rating };\r\n      if (feedbackEdit.edit === true) {\r\n        updateFeedback(feedbackEdit.item.id, newFeedback);\r\n      } else {\r\n        addFeedback(newFeedback);\r\n      }\r\n\r\n      setText('');\r\n    }\r\n  };\r\n  return (\r\n    <Card>\r\n      <form onSubmit={handleSubmit}>\r\n        <h2>How would you rate your service with us?</h2>\r\n        <Rating select={(rating) => setRating(rating)} />\r\n        <div className='input-group'>\r\n          <input\r\n            onChange={handleTextChange}\r\n            type='text'\r\n            placeholder='Write a review'\r\n            value={text}\r\n          />\r\n          <Button type='submit' isDisabled={btnDisable}>\r\n            Send\r\n          </Button>\r\n        </div>\r\n        {message && <div className='message'>{message}</div>}\r\n      </form>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default FeedbackForm;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}