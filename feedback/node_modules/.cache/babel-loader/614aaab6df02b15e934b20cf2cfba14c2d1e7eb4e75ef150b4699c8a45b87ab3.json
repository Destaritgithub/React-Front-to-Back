{"ast":null,"code":"import _objectSpread from\"C:/First/React-Front-to-Back/feedback/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/First/React-Front-to-Back/feedback/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/First/React-Front-to-Back/feedback/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/First/React-Front-to-Back/feedback/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/First/React-Front-to-Back/feedback/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{v4 as uuidv4}from'uuid';import{createContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var ContextFeedback=/*#__PURE__*/createContext();export var FeedbackProvider=function FeedbackProvider(_ref){var children=_ref.children;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),feedback=_useState4[0],setFeedback=_useState4[1];var _useState5=useState({item:{},edit:false}),_useState6=_slicedToArray(_useState5,2),feedbackEdit=_useState6[0],setFeedbackEdit=_useState6[1];useEffect(function(){fetchFeedback();},[]);// fetching data from server json\nvar fetchFeedback=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/feedback?_sort=id&_order=desc\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setFeedback(data);setIsLoading(false);case 8:case\"end\":return _context.stop();}},_callee);}));return function fetchFeedback(){return _ref2.apply(this,arguments);};}();var deleteFeedback=function deleteFeedback(id){if(window.confirm('Are you sure you want to delete?'))setFeedback(feedback.filter(function(item){return item.id!==id;}));};var addFeedback=function addFeedback(newFeedback){newFeedback.id=uuidv4();setFeedback([newFeedback].concat(_toConsumableArray(feedback)));};//set item to be updated\nvar editFeedback=function editFeedback(item){setFeedbackEdit({item:item,edit:true});};// updating feedback\nvar updateFeedback=function updateFeedback(id,updItem){setFeedback(feedback.map(function(item){return item.id===id?_objectSpread(_objectSpread({},item),updItem):item;}));};return/*#__PURE__*/_jsx(ContextFeedback.Provider,{value:{feedbackEdit:feedbackEdit,feedback:feedback,isLoading:isLoading,deleteFeedback:deleteFeedback,addFeedback:addFeedback,editFeedback:editFeedback,updateFeedback:updateFeedback,fetchFeedback:fetchFeedback},children:children});};export default ContextFeedback;","map":{"version":3,"names":["v4","uuidv4","createContext","useState","useEffect","jsx","_jsx","ContextFeedback","FeedbackProvider","_ref","children","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","feedback","setFeedback","_useState5","item","edit","_useState6","feedbackEdit","setFeedbackEdit","fetchFeedback","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","json","stop","apply","arguments","deleteFeedback","id","window","confirm","filter","addFeedback","newFeedback","concat","_toConsumableArray","editFeedback","updateFeedback","updItem","map","_objectSpread","Provider","value"],"sources":["C:/First/React-Front-to-Back/feedback/src/context/ContextFeedback.jsx"],"sourcesContent":["import { v4 as uuidv4 } from 'uuid';\r\nimport { createContext, useState, useEffect } from 'react';\r\nconst ContextFeedback = createContext();\r\nexport const FeedbackProvider = ({ children }) => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [feedback, setFeedback] = useState([]);\r\n  const [feedbackEdit, setFeedbackEdit] = useState({ item: {}, edit: false });\r\n  useEffect(() => {\r\n    fetchFeedback();\r\n  }, []);\r\n\r\n  // fetching data from server json\r\n  const fetchFeedback = async () => {\r\n    const response = await fetch(\r\n      `/feedback?_sort=id&_order=desc`\r\n    );\r\n    const data = await response.json();\r\n    setFeedback(data);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const deleteFeedback = (id) => {\r\n    if (window.confirm('Are you sure you want to delete?'))\r\n      setFeedback(feedback.filter((item) => item.id !== id));\r\n  };\r\n  const addFeedback = (newFeedback) => {\r\n    newFeedback.id = uuidv4();\r\n    setFeedback([newFeedback, ...feedback]);\r\n  };\r\n  //set item to be updated\r\n  const editFeedback = (item) => {\r\n    setFeedbackEdit({ item, edit: true });\r\n  };\r\n  // updating feedback\r\n  const updateFeedback = (id, updItem) => {\r\n    setFeedback(\r\n      feedback.map((item) => (item.id === id ? { ...item, ...updItem } : item))\r\n    );\r\n  };\r\n  return (\r\n    <ContextFeedback.Provider\r\n      value={{\r\n        feedbackEdit,\r\n        feedback,\r\n        isLoading,\r\n        deleteFeedback,\r\n        addFeedback,\r\n        editFeedback,\r\n        updateFeedback,\r\n        fetchFeedback,\r\n      }}\r\n    >\r\n      {children}\r\n    </ContextFeedback.Provider>\r\n  );\r\n};\r\nexport default ContextFeedback;\r\n"],"mappings":"8nBAAA,OAASA,EAAE,GAAI,CAAAC,MAAM,KAAQ,MAAM,CACnC,OAASC,aAAa,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAC3D,GAAM,CAAAC,eAAe,cAAGL,aAAa,EAAE,CACvC,MAAO,IAAM,CAAAM,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACzC,IAAAC,SAAA,CAAkCR,QAAQ,CAAC,IAAI,CAAC,CAAAS,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAzCG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAAgCb,QAAQ,CAAC,EAAE,CAAC,CAAAc,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAC5B,IAAAG,UAAA,CAAwCjB,QAAQ,CAAC,CAAEkB,IAAI,CAAE,CAAC,CAAC,CAAEC,IAAI,CAAE,KAAM,CAAC,CAAC,CAAAC,UAAA,CAAAV,cAAA,CAAAO,UAAA,IAApEI,YAAY,CAAAD,UAAA,IAAEE,eAAe,CAAAF,UAAA,IACpCnB,SAAS,CAAC,UAAM,CACdsB,aAAa,EAAE,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,GAAM,CAAAA,aAAa,6BAAAC,KAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACG,CAAAC,KAAK,kCAE3B,QAFKP,QAAQ,CAAAI,QAAA,CAAAI,IAAA,CAAAJ,QAAA,CAAAE,IAAA,SAGK,CAAAN,QAAQ,CAACS,IAAI,EAAE,QAA5BR,IAAI,CAAAG,QAAA,CAAAI,IAAA,CACVrB,WAAW,CAACc,IAAI,CAAC,CACjBlB,YAAY,CAAC,KAAK,CAAC,CAAC,wBAAAqB,QAAA,CAAAM,IAAA,MAAAX,OAAA,GACrB,kBAPK,CAAAL,aAAaA,CAAA,SAAAC,KAAA,CAAAgB,KAAA,MAAAC,SAAA,OAOlB,CAED,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIC,EAAE,CAAK,CAC7B,GAAIC,MAAM,CAACC,OAAO,CAAC,kCAAkC,CAAC,CACpD7B,WAAW,CAACD,QAAQ,CAAC+B,MAAM,CAAC,SAAC5B,IAAI,QAAK,CAAAA,IAAI,CAACyB,EAAE,GAAKA,EAAE,GAAC,CAAC,CAC1D,CAAC,CACD,GAAM,CAAAI,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIC,WAAW,CAAK,CACnCA,WAAW,CAACL,EAAE,CAAG7C,MAAM,EAAE,CACzBkB,WAAW,EAAEgC,WAAW,EAAAC,MAAA,CAAAC,kBAAA,CAAKnC,QAAQ,GAAE,CACzC,CAAC,CACD;AACA,GAAM,CAAAoC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIjC,IAAI,CAAK,CAC7BI,eAAe,CAAC,CAAEJ,IAAI,CAAJA,IAAI,CAAEC,IAAI,CAAE,IAAK,CAAC,CAAC,CACvC,CAAC,CACD;AACA,GAAM,CAAAiC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIT,EAAE,CAAEU,OAAO,CAAK,CACtCrC,WAAW,CACTD,QAAQ,CAACuC,GAAG,CAAC,SAACpC,IAAI,QAAM,CAAAA,IAAI,CAACyB,EAAE,GAAKA,EAAE,CAAAY,aAAA,CAAAA,aAAA,IAAQrC,IAAI,EAAKmC,OAAO,EAAKnC,IAAI,EAAC,CAAC,CAC1E,CACH,CAAC,CACD,mBACEf,IAAA,CAACC,eAAe,CAACoD,QAAQ,EACvBC,KAAK,CAAE,CACLpC,YAAY,CAAZA,YAAY,CACZN,QAAQ,CAARA,QAAQ,CACRJ,SAAS,CAATA,SAAS,CACT+B,cAAc,CAAdA,cAAc,CACdK,WAAW,CAAXA,WAAW,CACXI,YAAY,CAAZA,YAAY,CACZC,cAAc,CAAdA,cAAc,CACd7B,aAAa,CAAbA,aACF,CAAE,CAAAhB,QAAA,CAEDA,QAAQ,EACgB,CAE/B,CAAC,CACD,cAAe,CAAAH,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}