{"ast":null,"code":"import _objectSpread from\"C:/First/React-Front-to-Back/feedback/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/First/React-Front-to-Back/feedback/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"C:/First/React-Front-to-Back/feedback/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/First/React-Front-to-Back/feedback/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/First/React-Front-to-Back/feedback/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useState,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var ContextFeedback=/*#__PURE__*/createContext();export var FeedbackProvider=function FeedbackProvider(_ref){var children=_ref.children;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),feedback=_useState4[0],setFeedback=_useState4[1];var _useState5=useState({item:{},edit:false}),_useState6=_slicedToArray(_useState5,2),feedbackEdit=_useState6[0],setFeedbackEdit=_useState6[1];useEffect(function(){fetchFeedback();},[]);// fetching data from server json\nvar fetchFeedback=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/feedback?_sort=id&_order=desc\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;setFeedback(data);setIsLoading(false);case 8:case\"end\":return _context.stop();}},_callee);}));return function fetchFeedback(){return _ref2.apply(this,arguments);};}();var addFeedback=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(newFeedback){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('/feedback',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(newFeedback)});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;setFeedback([data].concat(_toConsumableArray(feedback)));case 7:case\"end\":return _context2.stop();}},_callee2);}));return function addFeedback(_x){return _ref3.apply(this,arguments);};}();var deleteFeedback=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:if(!window.confirm('Are you sure you want to delete?')){_context3.next=3;break;}_context3.next=3;return fetch(\"/feedback/\".concat(id),{method:'DELETE'});case 3:setFeedback(feedback.filter(function(item){return item.id!==id;}));case 4:case\"end\":return _context3.stop();}},_callee3);}));return function deleteFeedback(_x2){return _ref4.apply(this,arguments);};}();//set item to be updated\nvar editFeedback=function editFeedback(item){setFeedbackEdit({item:item,edit:true});};// updating feedback\nvar updateFeedback=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id,updItem){var response,data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"/feedback/\".concat(id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(updItem)});case 2:response=_context4.sent;_context4.next=5;return response.json();case 5:data=_context4.sent;setFeedback(feedback.map(function(item){return item.id===id?_objectSpread(_objectSpread({},item),data):item;}));case 7:case\"end\":return _context4.stop();}},_callee4);}));return function updateFeedback(_x3,_x4){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsx(ContextFeedback.Provider,{value:{feedbackEdit:feedbackEdit,feedback:feedback,isLoading:isLoading,deleteFeedback:deleteFeedback,addFeedback:addFeedback,editFeedback:editFeedback,updateFeedback:updateFeedback},children:children});};export default ContextFeedback;","map":{"version":3,"names":["createContext","useState","useEffect","jsx","_jsx","ContextFeedback","FeedbackProvider","_ref","children","_useState","_useState2","_slicedToArray","isLoading","setIsLoading","_useState3","_useState4","feedback","setFeedback","_useState5","item","edit","_useState6","feedbackEdit","setFeedbackEdit","fetchFeedback","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","json","stop","apply","arguments","addFeedback","_ref3","_callee2","newFeedback","_callee2$","_context2","method","headers","body","JSON","stringify","concat","_toConsumableArray","_x","deleteFeedback","_ref4","_callee3","id","_callee3$","_context3","window","confirm","filter","_x2","editFeedback","updateFeedback","_ref5","_callee4","updItem","_callee4$","_context4","map","_objectSpread","_x3","_x4","Provider","value"],"sources":["C:/First/React-Front-to-Back/feedback/src/context/ContextFeedback.jsx"],"sourcesContent":["import { createContext, useState, useEffect } from 'react';\r\nconst ContextFeedback = createContext();\r\nexport const FeedbackProvider = ({ children }) => {\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [feedback, setFeedback] = useState([]);\r\n  const [feedbackEdit, setFeedbackEdit] = useState({ item: {}, edit: false });\r\n  useEffect(() => {\r\n    fetchFeedback();\r\n  }, []);\r\n\r\n  // fetching data from server json\r\n  const fetchFeedback = async () => {\r\n    const response = await fetch(`/feedback?_sort=id&_order=desc`);\r\n    const data = await response.json();\r\n    setFeedback(data);\r\n    setIsLoading(false);\r\n  };\r\n\r\n  const addFeedback = async (newFeedback) => {\r\n    const response = await fetch('/feedback', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(newFeedback),\r\n    });\r\n    const data = await response.json();\r\n\r\n    setFeedback([data, ...feedback]);\r\n  };\r\n\r\n  const deleteFeedback = async (id) => {\r\n    if (window.confirm('Are you sure you want to delete?'))\r\n      await fetch(`/feedback/${id}`, { method: 'DELETE' });\r\n    setFeedback(feedback.filter((item) => item.id !== id));\r\n  };\r\n\r\n  //set item to be updated\r\n  const editFeedback = (item) => {\r\n    setFeedbackEdit({ item, edit: true });\r\n  };\r\n  // updating feedback\r\n  const updateFeedback = async (id, updItem) => {\r\n    const response = await fetch(`/feedback/${id}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(updItem),\r\n    });\r\n    const data = await response.json();\r\n    setFeedback(\r\n      feedback.map((item) => (item.id === id ? { ...item, ...data } : item))\r\n    );\r\n  };\r\n  return (\r\n    <ContextFeedback.Provider\r\n      value={{\r\n        feedbackEdit,\r\n        feedback,\r\n        isLoading,\r\n        deleteFeedback,\r\n        addFeedback,\r\n        editFeedback,\r\n        updateFeedback,\r\n      }}\r\n    >\r\n      {children}\r\n    </ContextFeedback.Provider>\r\n  );\r\n};\r\nexport default ContextFeedback;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}